---
layout: post
title: "意外的键盘输入"
date: 2017-10-21 00:14:07 +0800
date_modified: 2017-10-21 09:00:45 +0800
categories: win10 windows wpf
tags: WPF Windows keyboard mouse
description: 
---

最近在开发过程中遇到了些神奇的事情。

具体情况是做一款手写识别程序时，用户反馈自己每写一笔就会开始识别，并清除笔迹。

-----

![img](/media/0682A800.gif)

ok，经过一番精心的查看，原因是用户在使用鼠标书写收到了来自键盘的输入，而刚刚好我在业务上又监听了PreviewTextInput事件，在进行键盘输入时清理书写笔迹。于是问题就找到啦~~![img](/media/0687662C.png)



什么鬼啊！为什么鼠标操作能够收到键盘输入啊！你**的鼠标还是键盘啊！

是的~

。。。

![img](/media/QQ截图20171121145740.png)

就是这个家伙，他是一个长着鼠标外表的键盘

刚刚去razer的论坛看了看，目测是驱动问题。还有他家的键盘被识别成鼠标的反馈。。

以为就是这样的问题，但是，用户又说触摸书写也不行啊~

![img](/media/06CE74B9.gif)

总不成屏幕也是keyboard吧~

呼，还好不是。

再看下输入的字符`\u0003`ETX 正文结束，什么鬼，每次都是输入这个家伙。

ε=(´ο｀*)))唉，调试吧~

结果调试了一会，准备`ctrl+shift+s`的时候，出现了

![img](/media/QQ截图20171121145740.png)

所以真相是有道的划线取词，每次`mouseup`后会向焦点文本框输入一个ETX

![img](/media/070D0E8B.jpg)

珍爱生命，远离有道~

